# üîç AN√ÅLISE PROFUNDA - TESTE AC (Aten√ß√£o Concentrada)

**Data:** 03 de Novembro de 2025  
**Objetivo:** Desenvolver sistema de corre√ß√£o automatizada a partir de fotos

---

## üìã COMPREENS√ÉO DO TESTE AC

### Objetivo
Avaliar a capacidade do sujeito de manter a aten√ß√£o concentrada durante um per√≠odo determinado de tempo (5 minutos).

### P√∫blico-Alvo
Indiv√≠duos com idades entre 18 e 64 anos.

### Materiais
- Livro de Instru√ß√µes
- Livro de Aplica√ß√£o (folha de respostas)
- **Crivo de Corre√ß√£o** (chave de corre√ß√£o com c√≠rculos indicando respostas corretas)
- L√°pis ou caneta
- Cron√¥metro

---

## üéØ MEC√ÇNICA DO TESTE

### Estrutura da Folha de Respostas

1. **Ret√¢ngulo de Refer√™ncia (Topo):**
   - Cont√©m 3 tipos de setas/tri√¢ngulos que s√£o os **alvos** a serem encontrados
   - Exemplo: ‚û°Ô∏è (direita), ‚¨áÔ∏è (baixo), ‚¨ÖÔ∏è (esquerda)

2. **Linha de Exemplo:**
   - 21 s√≠mbolos para treino
   - 7 alvos devem ser marcados (posi√ß√µes 1, 3, 6, 10, 14, 17, 20)

3. **Grid Principal:**
   - 20 linhas (fileiras) de s√≠mbolos
   - Cada linha cont√©m aproximadamente 15 s√≠mbolos (varia)
   - Total aproximado: ~300 s√≠mbolos

### Instru√ß√µes para o Examinando

1. **Marca√ß√£o de Alvos:**
   - Procurar s√≠mbolos iguais aos do ret√¢ngulo de refer√™ncia
   - Marcar com um **risco vertical ou levemente inclinado**
   - Trabalhar da esquerda para direita, sequencialmente

2. **Cancelamento de Erros:**
   - Se marcar um s√≠mbolo errado, fazer um **c√≠rculo ao redor** da marca
   - O c√≠rculo anula o erro (n√£o conta como erro)

3. **Regras:**
   - Trabalhar com rapidez e aten√ß√£o
   - N√£o pular nenhum alvo
   - Omiss√µes e erros s√£o descontados dos acertos

---

## üìä CORRE√á√ÉO MANUAL (Processo Atual)

### Passo 1: Aplicar o Crivo
- O crivo √© uma folha transparente com **c√≠rculos pretos** indicando as posi√ß√µes corretas
- Ajusta-se o crivo sobre a folha de respostas
- Os c√≠rculos do crivo mostram onde o examinando **deveria ter marcado**

### Passo 2: Contagem de Acertos (A)
- Contar s√≠mbolos que est√£o:
  - ‚úÖ **Marcados** pelo examinando (linha vertical/inclinada)
  - ‚úÖ **Dentro dos c√≠rculos** do crivo (posi√ß√£o correta)
  - ‚úÖ **SEM c√≠rculo** ao redor da marca (n√£o foi cancelado)

### Passo 3: Contagem de Erros (E)
- Contar s√≠mbolos que est√£o:
  - ‚ùå **Marcados** pelo examinando (linha vertical/inclinada)
  - ‚ùå **FORA dos c√≠rculos** do crivo (n√£o √© alvo)
  - ‚ùå **SEM c√≠rculo** ao redor da marca (n√£o foi cancelado)
- **EXCE√á√ÉO:** Segundo a imagem fornecida, marcas circuladas podem contar como erro se o usu√°rio especificar

### Passo 4: Contagem de Omiss√µes (O)
- Contar s√≠mbolos que est√£o:
  - ‚ö†Ô∏è **Dentro dos c√≠rculos** do crivo (deveria ter marcado)
  - ‚ö†Ô∏è **N√ÉO marcados** pelo examinando (sem linha)
  - ‚ö†Ô∏è Considerar apenas at√© a **√∫ltima marca** do examinando
  - N√£o contar omiss√µes ap√≥s a √∫ltima marca

### Passo 5: C√°lculo de Pontos (P)
**F√≥rmula:** `P = A - (E + O)`

- Primeiro: somar erros e omiss√µes: `E + O`
- Depois: subtrair do total de acertos: `A - (E + O)`
- Cada erro ou omiss√£o desconta 1 ponto do total

### Passo 6: Obten√ß√£o do Percentil
- Consultar tabela normativa apropriada
- Crit√©rios de sele√ß√£o:
  1. Regi√£o (Sul, Sudeste, Centro-Oeste, Nordeste, Norte, ou Geral)
  2. Escolaridade (Fundamental, M√©dio, Superior, ou Total)
  3. Idade (18-64 anos)
- Se a pontua√ß√£o estiver entre dois percentis, usar o **percentil mais baixo**

### Passo 7: Classifica√ß√£o
Baseada no percentil:
- **Inferior:** P1-P10
- **M√©dio Inferior:** P20-P40
- **M√©dio:** P50-P75
- **M√©dio Superior:** P80-P90
- **Superior:** P95
- **Muito Superior:** P99

---

## üñºÔ∏è AN√ÅLISE DAS IMAGENS FORNECIDAS

### Imagem 1: Crivo de Corre√ß√£o (Chave)
- Fundo claro com **c√≠rculos pretos** em posi√ß√µes espec√≠ficas
- Cada c√≠rculo indica um s√≠mbolo alvo
- C√≠rculos podem estar agrupados ou isolados
- Padr√£o denso e irregular
- Total aproximado: ~140 c√≠rculos (7 por fileira √ó 20 fileiras)

### Imagem 2: Teste Preenchido (Sem Crivo)
- Grid de s√≠mbolos (tri√¢ngulos/setas em 4 dire√ß√µes)
- **Marcas azuis:** linhas verticais/inclinadas sobre s√≠mbolos
- **1 erro identificado:** s√≠mbolo marcado e depois circulado
- Contagem manual: 147 acertos, 1 erro, 0 omiss√µes
- Pontos: 147 - (1 + 0) = 146

### Imagem 3: Teste Preenchido com Crivo Sobreposto
- Combina√ß√£o do teste preenchido + crivo transparente
- **C√≠rculos pretos do crivo** sobrepostos √†s marcas azuis
- Permite visualizar:
  - Acertos: marcas azuis dentro de c√≠rculos pretos
  - Erros: marcas azuis fora de c√≠rculos pretos
  - Omiss√µes: c√≠rculos pretos sem marcas azuis

---

## ü§ñ DESAFIOS PARA AUTOMA√á√ÉO

### 1. Detec√ß√£o de S√≠mbolos
**Desafio:** Identificar cada s√≠mbolo no grid e sua orienta√ß√£o
- S√≠mbolos podem ser: ‚ñ≤ (cima), ‚ñº (baixo), ‚óÄ (esquerda), ‚ñ∂ (direita)
- Tamanho pequeno (~0.5-1cm)
- Densidade alta (~300 s√≠mbolos)
- Orienta√ß√£o variada

**Solu√ß√£o Proposta:**
- Usar detec√ß√£o de objetos (OpenCV, YOLO, ou similar)
- Classifica√ß√£o por orienta√ß√£o (CNN)
- Mapeamento de coordenadas (x, y) de cada s√≠mbolo

### 2. Detec√ß√£o do Crivo (Chave de Corre√ß√£o)
**Desafio:** Identificar c√≠rculos pretos do crivo
- C√≠rculos podem estar sobrepostos ao teste
- Precis√£o na localiza√ß√£o (deve coincidir com s√≠mbolos)
- Distinguir c√≠rculos do crivo de c√≠rculos de cancelamento

**Solu√ß√£o Proposta:**
- Detec√ß√£o de c√≠rculos (HoughCircles do OpenCV)
- Mapeamento de coordenadas dos c√≠rculos
- Compara√ß√£o com posi√ß√µes dos s√≠mbolos

### 3. Detec√ß√£o de Marcas do Examinando
**Desafio:** Identificar linhas verticais/inclinadas
- Cor da marca (azul na imagem, mas pode variar)
- Formato: linha vertical ou levemente inclinada
- Pode estar sobreposta ao s√≠mbolo

**Solu√ß√£o Proposta:**
- Detec√ß√£o de linhas (HoughLines do OpenCV)
- Filtro por cor (se poss√≠vel) ou por contraste
- Associa√ß√£o de linhas com s√≠mbolos (proximidade)

### 4. Detec√ß√£o de C√≠rculos de Cancelamento
**Desafio:** Distinguir c√≠rculos de cancelamento dos c√≠rculos do crivo
- C√≠rculos de cancelamento s√£o **ao redor de marcas**
- C√≠rculos do crivo s√£o **sobre s√≠mbolos corretos**
- Pode haver sobreposi√ß√£o

**Solu√ß√£o Proposta:**
- Detectar c√≠rculos menores (cancelamento)
- Verificar se h√° marca dentro do c√≠rculo
- Se sim, √© cancelamento (n√£o conta como erro)

### 5. Contagem de Acertos
**L√≥gica:**
```
Para cada s√≠mbolo:
  Se (marca presente E s√≠mbolo est√° dentro de c√≠rculo do crivo E sem c√≠rculo de cancelamento):
    acertos++
```

### 6. Contagem de Erros
**L√≥gica:**
```
Para cada s√≠mbolo:
  Se (marca presente E s√≠mbolo N√ÉO est√° dentro de c√≠rculo do crivo E sem c√≠rculo de cancelamento):
    erros++
  OU (se configura√ß√£o permitir):
  Se (marca presente E c√≠rculo de cancelamento presente):
    erros++ (caso especial mencionado na imagem)
```

### 7. Contagem de Omiss√µes
**L√≥gica:**
```
Encontrar √∫ltima marca do examinando (√∫ltima linha vertical)
Para cada s√≠mbolo at√© a √∫ltima marca:
  Se (s√≠mbolo est√° dentro de c√≠rculo do crivo E marca ausente):
    omissoes++
```

### 8. Integra√ß√£o com Tabelas Normativas
**Desafio:** Selecionar tabela correta e calcular percentil
- M√∫ltiplas tabelas (6 regi√µes √ó 4 n√≠veis de escolaridade)
- Interpola√ß√£o se necess√°rio
- Classifica√ß√£o baseada em percentil

**Solu√ß√£o Proposta:**
- Criar estrutura de dados com todas as tabelas
- Sele√ß√£o autom√°tica baseada em regi√£o/escolaridade
- Busca bin√°ria ou interpola√ß√£o linear para percentil

---

## üíª ARQUITETURA PROPOSTA

### 1. Entrada de Dados Manual
```
Interface:
- Campo: Acertos (A)
- Campo: Erros (E)
- Campo: Omiss√µes (O)
- Bot√£o: Calcular

C√°lculo:
- P = A - (E + O)
- Buscar percentil na tabela selecionada
- Exibir classifica√ß√£o
```

### 2. Processamento de Imagem
```
Fluxo:
1. Upload de imagem do teste preenchido
2. Upload de imagem do crivo (opcional, pode ser pr√©-carregado)
3. Pr√©-processamento:
   - Corre√ß√£o de perspectiva
   - Ajuste de brilho/contraste
   - Binariza√ß√£o
4. Detec√ß√£o:
   - S√≠mbolos (posi√ß√µes e orienta√ß√µes)
   - C√≠rculos do crivo
   - Marcas do examinando
   - C√≠rculos de cancelamento
5. An√°lise:
   - Compara√ß√£o de posi√ß√µes
   - Contagem (A, E, O)
6. C√°lculo:
   - P = A - (E + O)
   - Percentil e classifica√ß√£o
7. Exibi√ß√£o:
   - Resultados
   - Imagem anotada com acertos/erros/omiss√µes destacados
```

### 3. Estrutura de Dados

```javascript
// Resultado do processamento
{
  acertos: 147,
  erros: 1,
  omissoes: 0,
  pontos: 146,
  percentil: 95,
  classificacao: "Superior",
  tabela_utilizada: "Sudeste - Ensino Superior",
  detalhes: {
    acertos_posicoes: [[linha, coluna], ...],
    erros_posicoes: [[linha, coluna], ...],
    omissoes_posicoes: [[linha, coluna], ...]
  }
}
```

---

## üìö TABELAS NORMATIVAS

### Estrutura
- 6 tabelas por regi√£o (Sul, Sudeste, Centro-Oeste, Nordeste, Norte, Geral)
- Cada tabela tem 4 colunas (Fundamental, M√©dio, Superior, Total)
- Percentis: 1, 5, 10, 20, 25, 30, 40, 50, 60, 70, 75, 80, 90, 95, 99

### Armazenamento
- Banco de dados: `tabelas_normativas` e `normas_ac`
- Ou estrutura JSON para facilitar busca

---

## üéØ PR√ìXIMOS PASSOS

1. **Implementar entrada manual** (prioridade alta)
2. **Criar estrutura de processamento de imagem** (prioridade m√©dia)
3. **Implementar detec√ß√£o b√°sica** (OpenCV)
4. **Integrar com tabelas normativas**
5. **Testar com imagens reais**
6. **Refinar algoritmos de detec√ß√£o**

---

**√öltima atualiza√ß√£o:** 03 de Novembro de 2025

